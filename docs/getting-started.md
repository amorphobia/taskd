# TaskD å¿«é€Ÿå¼€å§‹

## é¡¹ç›®æ¦‚è¿°

TaskD æ˜¯ä¸€ä¸ªä¸“ä¸º Windows éç®¡ç†å‘˜ç”¨æˆ·è®¾è®¡çš„ä»»åŠ¡ç®¡ç†å·¥å…·ï¼Œæä¾›ç±»ä¼¼äº Windows æœåŠ¡çš„åŠŸèƒ½ï¼Œä½†æ— éœ€ç®¡ç†å‘˜æƒé™ã€‚

## å½“å‰çŠ¶æ€

âœ… **å·²å®Œæˆ**:
- é¡¹ç›®ç›®å½•ç»“æ„è®¾è®¡
- åŸºç¡€ CLI æ¡†æ¶
- ä»»åŠ¡ç®¡ç†æ ¸å¿ƒæ¶æ„
- é…ç½®æ–‡ä»¶ç»“æ„å®šä¹‰
- ç®€åŒ–ç‰ˆæœ¬æ¼”ç¤ºç¨‹åº

ğŸš§ **å¼€å‘ä¸­**:
- å®Œæ•´çš„ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†
- å¤–éƒ¨ä¾èµ–é›†æˆ (Cobra, Viper, TOML)
- è¿›ç¨‹ç›‘æ§å’Œé‡å¯ç­–ç•¥
- æ—¥å¿—è½®æ›¿åŠŸèƒ½

## å¿«é€Ÿæ„å»º

### 1. æ„å»ºç®€åŒ–ç‰ˆæœ¬ (æ— å¤–éƒ¨ä¾èµ–)

```bash
# æ„å»ºæ¼”ç¤ºç‰ˆæœ¬
go build -o build/taskd-simple.exe cmd/taskd/main-simple.go

# è¿è¡Œæµ‹è¯•
build/taskd-simple.exe --help
build/taskd-simple.exe list
```

### 2. æ„å»ºå®Œæ•´ç‰ˆæœ¬ (éœ€è¦ç½‘ç»œè¿æ¥)

```bash
# ä¸‹è½½ä¾èµ– (éœ€è¦ç½‘ç»œ)
go mod tidy

# æ„å»ºå®Œæ•´ç‰ˆæœ¬
go build -o build/taskd.exe cmd/taskd/main.go
```

### 3. ä½¿ç”¨æ„å»ºè„šæœ¬

```bash
# Windows
scripts/build.bat

# æˆ–ä½¿ç”¨ Makefile
make build
```

## é¡¹ç›®ç»“æ„

```
taskd/
â”œâ”€â”€ cmd/taskd/              # ç¨‹åºå…¥å£
â”œâ”€â”€ internal/               # å†…éƒ¨åŒ…
â”‚   â”œâ”€â”€ cli/               # å‘½ä»¤è¡Œæ¥å£
â”‚   â”œâ”€â”€ task/              # ä»»åŠ¡ç®¡ç†
â”‚   â””â”€â”€ config/            # é…ç½®ç®¡ç†
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”œâ”€â”€ examples/              # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ scripts/               # æ„å»ºè„šæœ¬
â””â”€â”€ build/                 # æ„å»ºè¾“å‡º
```

## æ ¸å¿ƒç‰¹æ€§è®¾è®¡

### ä»»åŠ¡é…ç½®
- TOML æ ¼å¼é…ç½®æ–‡ä»¶
- æ”¯æŒå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„å’Œå‚æ•°
- å·¥ä½œç›®å½•è®¾ç½®
- ç¯å¢ƒå˜é‡ç®¡ç† (ç»§æ‰¿/è¦†ç›–)
- æ ‡å‡†è¾“å…¥è¾“å‡ºé‡å®šå‘

### ä»»åŠ¡ç®¡ç†
- æ·»åŠ ã€åˆ é™¤ã€å¯åŠ¨ã€åœæ­¢ä»»åŠ¡
- ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢
- è¿›ç¨‹ç›‘æ§
- è‡ªåŠ¨é‡å¯ç­–ç•¥

### æ—¥å¿—ç³»ç»Ÿ
- ç»“æ„åŒ–æ—¥å¿—è®°å½•
- æ—¥å¿—è½®æ›¿
- ä»»åŠ¡ä¸“ç”¨æ—¥å¿—æ–‡ä»¶

## ä½¿ç”¨ç¤ºä¾‹

```bash
# æ·»åŠ ä»»åŠ¡
taskd add web-app --exec "python app.py" --workdir "C:\myapp"

# å¯åŠ¨ä»»åŠ¡
taskd start web-app

# æŸ¥çœ‹çŠ¶æ€
taskd status web-app

# åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡
taskd list

# åœæ­¢ä»»åŠ¡
taskd stop web-app
```

## é…ç½®æ–‡ä»¶ç¤ºä¾‹

TaskD ä½¿ç”¨ `TASKD_HOME` ç¯å¢ƒå˜é‡æ¥ç¡®å®šé…ç½®æ–‡ä»¶ä½ç½®ã€‚å¦‚æœæœªè®¾ç½®ï¼Œåˆ™ä½¿ç”¨é»˜è®¤ä½ç½® `~/.taskd`ã€‚

```toml
# $TASKD_HOME/tasks/web-app.toml (æˆ– ~/.taskd/tasks/web-app.toml)
name = "web-app"
executable = "python"
args = ["app.py"]
workdir = "C:\\myapp"
inherit_env = true
env = ["FLASK_ENV=production"]
stdout = "C:\\logs\\app.log"
auto_start = false

[restart]
policy = "always"
max_retry = 3
delay = "5s"

[log]
max_size = 10
max_backups = 5
max_age = 30
compress = true
```

### è‡ªå®šä¹‰é…ç½®ç›®å½•

```bash
# è®¾ç½®è‡ªå®šä¹‰é…ç½®ç›®å½•
export TASKD_HOME="/path/to/my/taskd"

# æ·»åŠ ä»»åŠ¡ï¼ˆé…ç½®å°†ä¿å­˜åˆ° $TASKD_HOME/tasks/ï¼‰
taskd add web-app --exec "python app.py" --workdir "/myapp"

# ä½¿ç”¨é»˜è®¤ç›®å½•
unset TASKD_HOME
taskd add web-app --exec "python app.py" --workdir "/myapp"
```

## å¼€å‘è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µ (2-3 å‘¨)
- å®Œæˆæ ¸å¿ƒä»»åŠ¡ç®¡ç†åŠŸèƒ½
- å®ç°åŸºç¡€ CLI å‘½ä»¤
- è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†

### ç¬¬äºŒé˜¶æ®µ (2-3 å‘¨)
- é«˜çº§é…ç½®é€‰é¡¹
- æ—¥å¿—ç³»ç»Ÿå’Œè½®æ›¿
- é‡å¯ç­–ç•¥å®ç°

### ç¬¬ä¸‰é˜¶æ®µ (2 å‘¨)
- ç¨³å®šæ€§ä¼˜åŒ–
- é”™è¯¯å¤„ç†å®Œå–„
- ç”¨æˆ·ä½“éªŒæ”¹è¿›

### ç¬¬å››é˜¶æ®µ (1-2 å‘¨)
- è·¨å¹³å°æ”¯æŒ
- æ‰“åŒ…å’Œåˆ†å‘
- æ–‡æ¡£å®Œå–„

## æŠ€æœ¯æ ˆ

- **è¯­è¨€**: Go 1.21+
- **CLI æ¡†æ¶**: Cobra
- **é…ç½®ç®¡ç†**: Viper + TOML
- **æ—¥å¿—è½®æ›¿**: Lumberjack
- **æ„å»ºå·¥å…·**: Go Modules + Makefile

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. åˆ›å»º Pull Request

## è®¸å¯è¯

MIT License (å¾…æ·»åŠ )

---

**æ³¨æ„**: å½“å‰ç‰ˆæœ¬ä¸ºå¼€å‘é¢„è§ˆç‰ˆï¼Œéƒ¨åˆ†åŠŸèƒ½ä»åœ¨å®ç°ä¸­ã€‚ç”Ÿäº§ç¯å¢ƒä½¿ç”¨è¯·ç­‰å¾…ç¨³å®šç‰ˆæœ¬å‘å¸ƒã€‚